// 简化的PMX调试代码
// 用于测试修复后的字符串解析

主要修复点总结：

1. **UTF-16LE字节序修复**：
   - 之前: `WideChars[i] = LowByte | (HighByte << 8);`
   - 现在: `WideChars[i] = (HighByte << 8) | LowByte;`

2. **数组越界安全修复**：
   - 添加了边界检查：`if (i * 2 + 1 >= RawData.Num())`
   - 安全的字符数量跟踪：`ActualCharCount`
   - 避免调用`SetNum()`改变数组大小导致的越界

3. **详细的调试输出**：
   - 位置跟踪：每个阶段的文件读取位置
   - 数据验证：字符串长度、顶点数量合理性检查
   - 错误定位：精确的错误位置和剩余数据量

4. **改进的错误处理**：
   - 提前检测文件数据不足
   - 验证权重类型有效性
   - 防止无限循环和死锁

**测试要点**：
1. 查看输出日志中的字符串读取日志
2. 确认权重类型在0-3范围内
3. 验证位置跟踪是否连续正确
4. 检查是否还有数组越界错误

如果还有问题，请检查具体的错误日志！
